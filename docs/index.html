<!DOCTYPE html>

<html>
<head>
	<meta charset="utf-8" />
	<title>How to "Kani-bot"</title>
	
	<link href="https://fonts.googleapis.com/css?family=Kosugi+Maru|Lexend+Exa&display=swap" rel="stylesheet">

	<style>
		body {
			font-family: 'Lexend Exa', 'Kosugi Maru', sans-serif;
			background-color : #fff;
			padding : 0px;
			margin  : 10px 0px;
			line-height : 150%;
			-webkit-text-size-adjust:none;
			font-size : 27px;
		}

		.title_contents {
			background-color : #fff;
			color : #f22;
			width: 100%;
			margin: 0px 0px;
			padding : 70px 0px 70px 0px;
		}

		.hoot_contents {
			width: auto;
			max-width: 900px;
			margin : 10px auto;
			width : 95%;
			text-align:right;
			font-size: 75%;
		}

		.main_contents {
			background-color:white;
			width: 95%;
			max-width: 900px;
			margin: 0px auto;
			padding: 30px 0px;
			box-shadow: 0px 0px 4px gray;
		}
						
		@media all and (min-width: 600px) {
			.wrapper {
				display: flex;
			}
		}

		.content {
			width : auto;

			margin: 0px 0px;
			padding: 30px 0px;
		}

		.content_title {
			border-bottom : dashed 1px #999;
			border-top : dashed 1px #999;
			width : auto;
			color: #f50;
			
			margin: 0px;
			padding: 30px 70px;

			font-size: 150%;
			font-weight: bold;
		}

		.content_husen:before {
			content: "🦀";
		}

		.content_husen {
			width: auto;
			font-size : 120%;
			font-weight: bold;
			padding: 30px 0px 0px 0px;
		}

		.content_body {
			width : auto;
			margin: 0px;
			padding: 30px 70px;
		}

		h1 {
			font-size  : 200%;
			text-align : center;
			margin : 20px 0px;
		}

		li {
			padding : 10px 0px; 
		}

		.state_value {
			color: #f00;
		}

	</style>
</head>
<body>
	<div class="title_contents">
		<h1>How to "Kani-bot"</h1>
		<div style="text-align:center">ゆっくり作成中です。がんばる。</div>
	</div>
	<div class="main_contents">
		<div class="content">
			<div class="content_title">Kani-bot (かにbot) ってなんなのさ</div>
			<div class="content_body">
				<div class="wrapper">
					<div style="">
						どっかの誰かが、botの作り方とかスクリプトの書き方とかを勉強をしていたら産まれたbotです。<br />
						完全にお遊びなので、ガバガバな部分が多々あると思います。いっときの暇つぶし程度に遊んでいただけたら幸いです。<br />
						暇つぶせるほど機能ないけどね。まいった。
					</div>
					<div style="text-align:center;">
						<div>
							<img src="picture/kani.png" style="min-width:170px; max-width:100%;" />
						</div>
						<div style="text-align:center">
							私がカニです。
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="content">
			<div class="content_title">なにができるのさ</div>
			<div class="content_body">
				<div class="content_husen">カニガチャ</div>
				<p>
					カニに「<b>カニガチャ</b>」と送ってみよう！<br />
					ランダムでイケイケなカニの画像が1枚送られてくるぞ！
					色々なカニがキミを待っている！
				</p>
				<p>
					<b>☆カニ種類数と提供確率</b><br />
					カニ種類数 : <span id="state_gacha_variation_all" class="state_value">?</span>匹
					<table style="margin-left: 30pt">
						<tr><td>N</td>  <td><span class="state_value state_gacha_variation_rares">?</span>匹</td><td>(<span class="state_value state_gacha_rates">?</span>%)</td></tr>
						<tr><td>R</td>  <td><span class="state_value state_gacha_variation_rares">?</span>匹</td><td>(<span class="state_value state_gacha_rates">?</span>%)</td></tr>
						<tr><td>SR</td> <td><span class="state_value state_gacha_variation_rares">?</span>匹</td><td>(<span class="state_value state_gacha_rates">?</span>%)</td></tr>
						<tr><td>SSR</td><td><span class="state_value state_gacha_variation_rares">?</span>匹</td><td>(<span class="state_value state_gacha_rates">?</span>%)</td></tr>
					</table>
				</p>
				<div class="content_husen">カニ図鑑</div>
				<p>
					カニに「<b>カニ図鑑</b>」と送ってみよう！<br />
					カニが世界中のカニについて教えてくれるぞ(wiki調べ)<br />
					※現在は <span id="state_dictionary_variation" class="state_value">?</span>種類のカニから1つを教えてくれます。
				</p>
				<div class="content_husen">カニじゃんけん</div>
				<p>
					カニに「<b>じゃんけん</b>」と送ってみよう！<br />
					カニとじゃんけんで勝負できるぞ！<br />
					カニだからと言って侮ってはならない！このカニ無駄に運がいいぞ！<br />
				</p>
				<div class="content_husen">カニクイズ</div>
				<p>
					カニに「<b>カニクイズ</b>」と送ってみよう！<br />
					カニがクイズを出してくるので、正解が書かれたボタンを押して答えよう。<br />
					(現在は〇か×かしか聞いてきません。俗にいうニブイチ)<br />
					※ クイズは現在<span id="state_quiz_variation" class="state_value">?</span>種類からランダムで出題されます<br />
				</p>
				<div class="content_husen">なんか話して</div>
				<p>
					カニに「<b>なんか話して</b>」と送ってみよう！<br />
					カニが、<span id="state_speak_variation" class="state_value">?</span>種類の中から1つ、タメになったりならなかったりすることを話すぞ！だいたいタメにならない！
				</p>
				<div class="content_husen">その他</div>
				<p>
					カニは稀に特定のメッセージや単語に反応することがあるぞ。稀に。ホント稀に。見つけたらラッキー！
				</p>
				<div style="margin: 100px 0px 0px 0px; color:#999;">
					※数値が ? 表示になっている場合、何らかの原因で情報が取得できませんでした。ごめんなさい！
				</div>
			</div>
		</div>

		<div class="content">
			<div class="content_title">スペシャルサンクス</div>
			<div class="content_body">
				<div class="content_husen"><b>こまぷー</b> さん</div>
				<p>
					カニガチャに出てくるイラスト 2 種類
				</p>
				<div class="content_husen"><b>ばんぱー</b> さん</div>
				<p>
					カニガチャに出てくるイラスト 2 種類 + 一部の解説文
				</p>
				<p style="margin: 40px 0px;">
					...and You🦀
				</p>
				<p>
					ありがとうございます。いやホントに。ホントよ！
				</p>
			</div>
		</div>

		<div class="content">
			<div class="content_title">進化の歴史</div>
			<div class="content_body">
				<p>
					誰が見るねんって感じだけど、残しておきます。
				</p>
				<details open>
					<summary>2021</summary>
					<div class="content_husen">2020/04/28</div>
					<ul>
						<li>
							<b>「カニクイズ」機能の追加</b><br />
							とりあえず〇か×で答えていく形にしました。<br />
							(クイズの作問経験が本当になく、問題に"不備"があるかもしれません。ごめんなさい。)<br />
							実装が終わったあと、問題を考えているときに〇×クイズの「作問」難易度の高さに気づき、「択一クイズ」にしたくなりました。<br />
							ので、もしかしたらいつか択一式に変更するかも。
						</li>
						<li>
							<b>「カニガチャ」の仕様変更</b><br />
							いままではカード1枚ごとに排出比重が設定されていましたが、レアリティごとに確率が設定され、レアリティ内のカードすべてが平等な確率で出てくる形に変更しました。<br />
						</li>
					</ul>
				</details>
				<details>
					<summary>2020</summary>
					<div class="content_husen">2020/05/06</div>
					<ul>
						<li>
							<b>内部のいろいろな修正</b><br />
							<ul>
								<li>
									データを管理してるスプレッドシートを完全に外部から非公開にしました。<br />
									趣味的なモンだしいいや～って思ってたけど、やっぱりちゃんとすることにしました。
								</li>
								<li>テストで書かれっぱなしだったコードとかの整理</li>
							</ul>
						</li>
					</ul>
					<div class="content_husen">2020/05/04</div>
					<ul>
						<li>
							<b>「カニじゃんけん」機能追加。</b><br />
							こちらが何を出してもカニが負けてるくせに、「俺の勝ち！」と言い張ってくるプログラムのミスがありましたが早急に直しました。<br />
							よく負けますがちゃんと勝てるのでご安心ください。
						</li>
					</ul>
				</details>
				<details>
					<summary>2019</summary>
					<div class="content_husen">2019/12/23</div>
					<ul>
						<li>
							<b>「カニガチャ」の絵柄追加。</b><br />
							5種類増えました。新規のカニは出てくる確率がほんの少し高くなってます。<br />
							「SSR」枠のカニがようやく追加されました。ちょっとだけ絵がレアっぽいです。クオリティはさておき。
						</li>
					</ul>
					<div class="content_husen">2019/08/25</div>
					<ul>
						<li>
							<b>特定のメッセージや単語に反応する機能を完全に自前のスクリプトで動作するようにしました。</b><br />
							(今までLine@の標準機能と併用していて、不具合が出ていたため)<br />
							→これにより、反応する単語設定の自由度が上がって、少しだけ柔軟になりました。(表記ゆれを許容したり)<br />
							→柔軟すぎて想定外な返事を返すかもしれないですが、どうにかしようとはするので許して
						</li>
						<li>
							<b>特定の時間限定のメッセージを一時的に削除</b><br />
							夜話しかけて「カニいつも寝てるんだけど」ってなってたっぽい＆まだその機能を自前で作れていないため。
						</li>
						<li>
							<b>「カニ図鑑」機能追加。</b><br />
							最初作ろうとしてた機能を今頃作りました。wikipedia様は何でも知ってる。
						</li>
					</ul>
					<div class="content_husen">2019/08/20</div>
					<ul>
						<li>
							<b>チュートリアルページ(これ)の作成しなおし。</b><br />
							ちょっとは見た目がマシになった気がする。
						</li>
						<li>
							Google Apps Scriptで無理やり表示させていたのをやめて、Github Pagesで公開してみました。<br />カンタン。神。
						</li>
					</ul>
					<div class="content_husen">2019/02/22</div>
					<ul>
						<li>
							<b>チュートリアルページ作成。</b><br />
							かなり雑。
						</li>
						<li>
							<b>「カニガチャ」機能追加。</b><br />
							出てくるカニは自分で描いた 4 種類 + 描いていただいてしまった 4 種類。ありがとうございます。
						</li>
						<li>
							<b>「なんか話して」機能追加。</b><br />
							15種類くらいから喋ります。
						</li>
					</ul>
					<div class="content_husen">2019/02/21</div>
					<ul>
						<li>
							<b>Google Apps Script導入。</b><br />
							メッセージ書き込むとオウム返しをしてくるbot爆誕。
						</li>
					</ul>
					<h3 class="content_husen">2019/02/20</h3>
					<ul>
						<li>
							<b>Kani-bot爆誕。</b><br />
							何を書き込んでも<br />
							「メッセージありがとうございます😄<br />
							申し訳ありませんが、このアカウントでは個別のご返信ができないのです🙁<br />
							次の配信をお楽しみに✨」<br />
							しか返ってこない。(デフォルトメッセージ)
						</li>
					</ul>
				</details>
			</div>
		</div>

	</div>
	<div class="hoot_contents">
		<div>
			2019-2021 Kani-bot
		</div>
	</div>

	<script>
		function LoadStatus() {

			const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTpXkJlEaePJ2SBYkpn1CVd79AOp0FMXizw1e3kh8QS0NrbOsTJTahxBAbH3tKngYCf2H-ZG-Vkkij_/pub?gid=669264084&single=true&output=csv'

			const eStateGachaRates          = document.getElementsByClassName("state_gacha_rates");
            const eStateGachaVariationRares = document.getElementsByClassName("state_gacha_variation_rares");
			const eStateGachaVariationAll   = document.getElementById("state_gacha_variation_all");
			const eStateSpeakVariation      = document.getElementById("state_speak_variation");
			const eStateDictionaryVariation = document.getElementById("state_dictionary_variation");
            const eStateQuizVariation       = document.getElementById("state_quiz_variation");

			let req = new XMLHttpRequest();
			req.onreadystatechange = function () {
				if (req.readyState == 4 && req.status == 200) {
					//正常取得 //req.responseText

					let status = req.responseText.split('\n');

					for (let i = 0; i < 4; i++) {
						eStateGachaVariationRares[i].textContent = status[1 + i];
						eStateGachaRates[i].textContent          = status[5 + i];
					}
					eStateGachaVariationAll.textContent = status[0];
					eStateSpeakVariation.textContent = status[9];
					eStateDictionaryVariation.textContent = status[10];
					eStateQuizVariation.textContent = status[12];
				}
			}
			req.open("GET", sheetUrl, true);
			req.send(null);
		}
		LoadStatus();
	</script>
</body>
</html>